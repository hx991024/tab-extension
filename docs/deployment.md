# 极简新标签页扩展 - 打包与发布说明

## 项目概述

本项目是一个极简、高性能、高颜值的 Chrome / Edge 新标签页扩展，完全使用原生 HTML、CSS 和 JavaScript 开发，符合 Manifest V3 规范。

## 项目结构

```
/tab-extension
├── manifest.json                # 扩展核心配置文件
├── newtab.html                  # 新标签页入口文件
├── styles/                      # 样式文件夹
│   ├── main.css                 # 全局重置与基础布局
│   ├── theme.css                # 主题变量定义
│   ├── components.css           # 搜索框、时钟等组件样式
│   ├── wallpaper.css            # 壁纸与背景层样式
│   └── settings.css             # 设置抽屉与控件样式
├── scripts/                     # 逻辑文件夹
│   ├── main.js                  # 入口脚本，负责初始化与模块协调
│   ├── storage.js               # 数据存储封装层
│   ├── clock.js                 # 时间日期模块
│   ├── search.js                # 搜索功能与跳转逻辑
│   ├── theme.js                 # 主题切换逻辑
│   ├── wallpaper.js             # 壁纸上传、渲染与样式应用
│   ├── settings.js              # 设置面板 UI 交互与事件绑定
│   └── engines.js               # 搜索引擎管理逻辑
├── assets/                      # 静态资源
│   ├── icons/                   # 扩展图标
│   │   └── icon.svg             # SVG 格式图标
│   └── ui/                      # UI 图标
│       ├── gear.svg             # 设置图标
│       └── search.svg           # 搜索图标
├── background.js                # 后台服务 (Service Worker)
└── docs/                        # 文档
    ├── design_specs.md          # 设计规范文档
    └── deployment.md            # 本文档
```

## 功能特性

### 核心功能

- **实时时钟显示**：显示当前时间（HH:mm:ss）和日期（YYYY 年 MM 月 DD 日 星期 X）
- **搜索引擎集成**：支持 Google、Bing、百度、DuckDuckGo，可自定义添加
- **本地壁纸支持**：支持上传本地图片作为壁纸，可调节模糊和遮罩效果
- **主题切换**：支持跟随系统、浅色主题、深色主题三种模式

### 设置功能

- **常规设置**：搜索框宽度、透明度、搜索打开方式、Tab 键切换搜索引擎
- **壁纸设置**：本地上传壁纸、壁纸模糊强度、遮罩透明度
- **搜索引擎管理**：默认搜索引擎设置、自定义搜索引擎添加/编辑/删除
- **主题切换**：跟随系统、浅色主题、深色主题

## 技术特点

- **Manifest V3**：完全符合最新的 Chrome 扩展规范
- **原生技术栈**：仅使用 HTML、CSS、JavaScript，无任何框架依赖
- **模块化设计**：代码结构清晰，各功能模块独立
- **数据持久化**：使用 chrome.storage.local 保存用户设置
- **响应式设计**：适配不同屏幕尺寸，从 1920×1080 到 4K 分辨率
- **高性能**：优化的渲染逻辑和资源管理

## 安装与调试

### 1. 准备图标文件

由于项目无法直接生成 PNG 格式的图标文件，您需要手动将 `assets/icons/icon.svg` 转换为以下三个 PNG 文件：

- `assets/icons/icon16.png` (16×16 像素)
- `assets/icons/icon48.png` (48×48 像素)
- `assets/icons/icon128.png` (128×128 像素)

您可以使用以下工具进行转换：

- 在线工具：如 [SVG to PNG](https://convertio.co/svg-png/)
- 设计软件：Adobe Illustrator、Sketch、Figma 等
- 命令行工具：如 `inkscape` 或 `rsvg-convert`

### 2. 加载扩展到浏览器

#### Chrome 浏览器：

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目根目录 (`tab-extension`)
6. 扩展将出现在扩展列表中

#### Edge 浏览器：

1. 打开 Edge 浏览器
2. 访问 `edge://extensions/`
3. 开启左下角的"开发人员模式"
4. 点击"加载解压缩的扩展"
5. 选择项目根目录 (`tab-extension`)
6. 扩展将出现在扩展列表中

### 3. 测试功能

加载扩展后，打开新标签页即可看到效果。可以测试以下功能：

1. **时钟显示**：确认时间和日期正确显示
2. **搜索功能**：输入关键词并按 Enter 测试搜索
3. **Tab 键切换**：按 Tab 键测试搜索引擎切换（需在设置中开启）
4. **设置面板**：点击左下角齿轮图标打开设置面板
5. **壁纸上传**：在"壁纸"设置中上传本地图片
6. **主题切换**：在"主题切换"设置中切换不同主题模式

## 打包发布

### 1. 准备发布包

1. 确保所有功能正常工作
2. 确保图标文件已转换为 PNG 格式
3. 检查 `manifest.json` 中的版本号和描述
4. 移除调试代码和 `console.log` 语句（可选）

### 2. Chrome Web Store 发布

1. 访问 [Chrome Web Store 开发者控制台](https://chrome.google.com/webstore/developer/dashboard)
2. 登录您的 Google 账户
3. 支付一次性开发者注册费用（5 美元）
4. 点击"添加新项目"
5. 上传扩展的 ZIP 包（将整个项目文件夹打包为 ZIP）
6. 填写商店列表信息：
   - 扩展名称：极简新标签页
   - 描述：一款极简、高性能、高颜值的新标签页扩展
   - 分类：生产力
   - 语言：中文（简体）
7. 上传截图（1280×800 或 640×400）
8. 上传推广图片（440×280，可选）
9. 上传图标（128×128）
10. 设置隐私政策和分发选项
11. 提交审核

### 3. Edge Add-ons 发布

1. 访问 [Microsoft Edge 加载项开发人员中心](https://partner.microsoft.com/dashboard/microsoftedge)
2. 登录您的 Microsoft 账户
3. 点击"新建扩展"
4. 上传扩展包（与 Chrome 相同的 ZIP 包）
5. 填写扩展信息
6. 提交审核

## 注意事项

1. **权限最小化**：扩展仅请求必要的权限（storage）
2. **内容安全策略**：遵循 CSP 规则，不使用内联脚本
3. **隐私保护**：不收集任何用户数据，所有设置本地存储
4. **兼容性**：支持 Chrome 88+ 和 Edge 88+
5. **性能优化**：避免内存泄漏，确保长时间使用稳定

## 故障排除

### 常见问题

1. **扩展无法加载**

   - 检查 `manifest.json` 语法是否正确
   - 确认所有引用的文件路径正确
   - 检查浏览器控制台是否有错误信息

2. **图标不显示**

   - 确认 PNG 图标文件已创建
   - 检查 `manifest.json` 中的图标路径

3. **设置不保存**

   - 检查 `storage` 权限是否在 `manifest.json` 中声明
   - 查看控制台是否有存储相关错误

4. **样式显示异常**
   - 检查 CSS 文件路径是否正确
   - 确认 CSS 变量定义是否正确

### 调试技巧

1. 使用浏览器开发者工具调试页面和脚本
2. 查看 `chrome://extensions/` 中的扩展错误日志
3. 使用 `console.log` 临时调试（发布前移除）
4. 使用 `chrome.storage.local` 查看存储数据

## 更新维护

### 版本更新流程

1. 更新 `manifest.json` 中的版本号
2. 修改功能代码
3. 测试所有功能
4. 打包新版本
5. 上传到应用商店
6. 发布更新说明

### 未来改进方向

1. 添加更多搜索引擎
2. 支持壁纸分类管理
3. 添加快捷键支持
4. 增加天气显示功能
5. 支持书签快速访问

## 许可证

本项目采用 MIT 许可证，您可以自由使用、修改和分发。
