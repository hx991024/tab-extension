<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>新标签页</title>
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/theme.css" />
    <link rel="stylesheet" href="styles/components.css" />
    <link rel="stylesheet" href="styles/wallpaper.css" />
    <link rel="stylesheet" href="styles/settings.css" />
  </head>
  <body>
    <!-- 壁纸背景层 -->
    <div id="wallpaper-container" class="wallpaper-container"></div>
    <div id="wallpaper-overlay" class="wallpaper-overlay"></div>

    <!-- 主内容区 -->
    <main class="main-content">
      <!-- 搜索区域 -->
      <header class="search-section">
        <div class="search-container" id="search-container">
          <img
            id="search-engine-icon"
            src="assets/ui/search.svg"
            alt="Search Engine"
            class="search-engine-icon"
          />
          <input
            type="text"
            id="search-input"
            class="search-input"
            placeholder="搜索互联网..."
            autocomplete="off"
            spellcheck="false"
          />
        </div>
      </header>

      <!-- 时间日期区域 -->
      <section class="clock-section">
        <div id="time" class="time">00:00:00</div>
        <div id="date" class="date">2024年01月01日 星期一</div>
      </section>
    </main>

    <!-- 设置入口 -->
    <button id="settings-toggle" class="settings-toggle" aria-label="设置">
      <img src="assets/ui/gear.svg" alt="Settings" class="settings-icon" />
    </button>

    <!-- 设置抽屉 -->
    <aside id="settings-drawer" class="settings-drawer">
      <div class="settings-header">
        <h2>设置</h2>
        <button
          id="settings-close"
          class="settings-close"
          aria-label="关闭设置"
        >
          ×
        </button>
      </div>
      <div class="settings-body">
        <nav class="settings-nav">
          <ul>
            <li>
              <a href="#general" class="nav-link active" data-tab="general"
                >常规设置</a
              >
            </li>
            <li>
              <a href="#wallpaper" class="nav-link" data-tab="wallpaper"
                >壁纸</a
              >
            </li>
            <li>
              <a href="#engines" class="nav-link" data-tab="engines"
                >搜索引擎</a
              >
            </li>
            <li>
              <a href="#theme" class="nav-link" data-tab="theme">主题切换</a>
            </li>
          </ul>
        </nav>
        <div class="settings-content">
          <!-- 常规设置 -->
          <div id="general-tab" class="tab-content active">
            <div class="setting-item">
              <label for="search-width">搜索框宽度</label>
              <div class="setting-item-control">
                <input
                  type="range"
                  id="search-width"
                  min="400"
                  max="900"
                  value="600"
                />
                <span id="search-width-value">600px</span>
              </div>
            </div>
            <div class="setting-item">
              <label for="search-height">搜索框高度</label>
              <div class="setting-item-control">
                <input
                  type="range"
                  id="search-height"
                  min="40"
                  max="70"
                  value="50"
                />
                <span id="search-height-value">50px</span>
              </div>
            </div>
            <div class="setting-item">
              <label for="search-radius">搜索框圆角</label>
              <div class="setting-item-control">
                <input
                  type="range"
                  id="search-radius"
                  min="0"
                  max="30"
                  value="12"
                />
                <span id="search-radius-value">12px</span>
              </div>
            </div>
            <div class="setting-item">
              <label for="search-opacity">搜索框透明度</label>
              <div class="setting-item-control">
                <input
                  type="range"
                  id="search-opacity"
                  min="0.2"
                  max="1"
                  step="0.1"
                  value="0.8"
                />
                <span id="search-opacity-value">0.8</span>
              </div>
            </div>
            <div class="setting-item">
              <label for="open-in">搜索打开方式</label>
              <div class="setting-item-control">
                <select id="open-in">
                  <option value="new-tab">新标签页</option>
                  <option value="current-tab">当前标签页</option>
                </select>
              </div>
            </div>
            <div class="setting-item">
              <label for="tab-switch">Tab键切换搜索引擎</label>
              <div class="setting-item-control">
                <div class="toggle-switch">
                  <input type="checkbox" id="tab-switch" checked />
                  <span class="slider"></span>
                </div>
              </div>
            </div>
            <div class="setting-item">
              <label>重置设置</label>
              <div class="setting-item-control">
                <button id="reset-settings" class="reset-wallpaper-btn">
                  重置为默认值
                </button>
              </div>
            </div>
          </div>

          <!-- 壁纸设置 -->
          <div id="wallpaper-tab" class="tab-content">
            <div class="setting-item">
              <label for="wallpaper-upload">上传本地壁纸</label>
              <div class="setting-item-control">
                <input
                  type="file"
                  id="wallpaper-upload"
                  accept="image/jpeg, image/png, image/webp"
                />
                <label for="wallpaper-upload" class="file-upload-btn"
                  >选择文件</label
                >
                <button id="wallpaper-reset" class="reset-wallpaper-btn">
                  重置为默认
                </button>
              </div>
            </div>
            <div class="setting-item">
              <label for="wallpaper-blur">壁纸模糊强度</label>
              <div class="setting-item-control">
                <input
                  type="range"
                  id="wallpaper-blur"
                  min="0"
                  max="20"
                  value="0"
                />
                <span id="wallpaper-blur-value">0px</span>
              </div>
            </div>
            <div class="setting-item">
              <label for="wallpaper-overlay-opacity">遮罩透明度</label>
              <div class="setting-item-control">
                <input
                  type="range"
                  id="wallpaper-overlay-opacity"
                  min="0"
                  max="0.8"
                  step="0.1"
                  value="0.3"
                />
                <span id="wallpaper-overlay-opacity-value">0.3</span>
              </div>
            </div>
          </div>

          <!-- 搜索引擎设置 -->
          <div id="engines-tab" class="tab-content">
            <div class="setting-item">
              <label for="default-engine">默认搜索引擎</label>
              <div class="setting-item-control">
                <select id="default-engine">
                  <option value="google">Google</option>
                  <option value="bing">Bing</option>
                  <option value="baidu">百度</option>
                  <option value="duckduckgo">DuckDuckGo</option>
                </select>
              </div>
            </div>
            <div class="engines-list" id="engines-list">
              <!-- 动态生成搜索引擎列表 -->
            </div>
            <button id="add-engine" class="add-engine-btn">
              添加自定义搜索引擎
            </button>
          </div>

          <!-- 主题设置 -->
          <div id="theme-tab" class="tab-content">
            <div class="setting-item">
              <label>主题模式</label>
              <div class="theme-options">
                <div class="theme-option">
                  <input
                    type="radio"
                    id="theme-system"
                    name="theme"
                    value="system"
                    checked
                  />
                  <label for="theme-system">跟随系统</label>
                </div>
                <div class="theme-option">
                  <input
                    type="radio"
                    id="theme-light"
                    name="theme"
                    value="light"
                  />
                  <label for="theme-light">浅色主题</label>
                </div>
                <div class="theme-option">
                  <input
                    type="radio"
                    id="theme-dark"
                    name="theme"
                    value="dark"
                  />
                  <label for="theme-dark">深色主题</label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- 添加自定义搜索引擎模态框 -->
    <div id="engine-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>添加自定义搜索引擎</h3>
          <button class="modal-close" id="engine-modal-close">×</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="engine-name">名称</label>
            <input type="text" id="engine-name" placeholder="例如：知乎" />
          </div>
          <div class="form-group">
            <label for="engine-url">搜索URL (使用 %s 作为关键词占位符)</label>
            <input
              type="text"
              id="engine-url"
              placeholder="例如：https://www.zhihu.com/search?type=content&q=%s"
            />
          </div>
          <div class="form-group">
            <label for="engine-icon">图标URL (可选)</label>
            <input
              type="text"
              id="engine-icon"
              placeholder="例如：https://www.zhihu.com/favicon.ico"
            />
          </div>
        </div>
        <div class="modal-footer">
          <button id="save-engine" class="btn-primary">保存</button>
          <button id="cancel-engine" class="btn-secondary">取消</button>
        </div>
      </div>
    </div>

    <script type="module" src="scripts/main.js"></script>
  </body>
</html>
