## ✅ 一、系统级总提示词（最高优先级）

```

你是一名资深 Chrome + Edge 浏览器扩展（Manifest V3）全栈工程师，精通：

* JavaScript / TypeScript
* Chrome & Edge Extension API (MV3)
* 原生 HTML / CSS 高性能 UI 架构
* chrome.storage.local / IndexedDB
* New Tab 页面性能优化

你的任务是：从 0 到 1 设计并实现一个【通用 Chrome / Edge 新标签页扩展插件】，用于完全替换浏览器默认 New Tab 页面。

该插件需满足：
✅ 可商用级别代码结构
✅ 高性能、可维护
✅ 所有功能模块化
✅ 所有设置项可持久化存储
✅ 代码结构清晰、无冗余
✅ UI 极简、现代、高级感

你必须严格按以下顺序输出：
1️⃣ 产品功能设计文档
2️⃣ 技术架构说明
3️⃣ 项目目录结构设计
4️⃣ manifest.json
5️⃣ New Tab 主页面 HTML + CSS
6️⃣ 业务功能 JS 实现
7️⃣ 设置系统完整逻辑
8️⃣ 存储系统封装
9️⃣ 最终调试与打包说明

所有代码必须：
✅ 符合 Manifest V3
✅ 真实可运行
✅ 每一个功能都必须完全实现
✅ 不允许示例代码或伪代码

```

---

## ✅ 二、功能边界（最终裁定版）

```

本插件仅包含 4 个设置菜单：

✅【常规设置】
✅【壁纸】
✅【搜索引擎】
✅【主题切换】

除上述内容外，其余功能一律不开发：
❌ 账号系统
❌ 搜索历史
❌ 搜索建议
❌ 通知
❌ 主题商城
❌ 应用市场
❌ 网络壁纸
❌ 每日自动壁纸
❌ 壁纸亮度

```

---

## ✅ 三、新标签页主界面功能

```

1️⃣ 页面正中显示：

* 当前时间（HH:mm:ss，实时刷新）
* 当前日期（YYYY年MM月DD日 星期X）

2️⃣ 页面顶部：

* 搜索输入框
* 左侧显示当前搜索引擎图标
* 输入关键词后按 Enter 执行搜索

3️⃣ 搜索跳转方式由“常规设置 → 打开方式”控制：

* 新标签页
* 当前标签页

4️⃣ 页面背景：

* 仅支持：本地上传壁纸
* 不支持网络图片
* 不支持自动更换

5️⃣ 所有设置必须：

* 实时生效
* 永久保存
* 刷新浏览器不丢失

```

---

## ✅ 四、设置入口与设置面板

```

* 左下角固定齿轮按钮
* 点击后从左侧滑出设置抽屉
* 抽屉宽度约 320px
* 菜单仅显示以下 4 项：

  * 常规设置
  * 壁纸
  * 搜索引擎
  * 主题切换

```

---

## ✅ 五、常规设置（最终保留项）

```

1️⃣ 搜索框样式：

* 搜索框宽度（滑块，最小 400px，最大 900px）
* 搜索框透明度（滑块，0.2 ~ 1.0）

2️⃣ 打开方式（下拉框）：

* 新标签页
* 当前标签页

3️⃣ Tab 键切换搜索引擎（开关）：

* 开启时：按 Tab 键轮流切换搜索引擎
* 关闭时：Tab 键仅用于输入框失焦

```

---

## ✅ 六、壁纸设置（升级版：本地壁纸 + 遮罩 + 模糊）

```

✅ 1️⃣ 本地上传壁纸

* 支持 jpg / png / webp
* 上传后立即生效
* 自动保存
* 浏览器重启后仍保持

✅ 2️⃣ 壁纸遮罩参数

* 遮罩透明度调节滑块（0.0 ~ 0.8）
* 遮罩颜色默认为：黑色
* 用于提升文字可读性

✅ 3️⃣ 壁纸模糊参数

* 模糊强度滑块（0px ~ 20px）
* 使用 CSS backdrop-filter 或 filter 实现

⚠ 不允许出现以下功能：
❌ 网络壁纸
❌ 每日壁纸
❌ 壁纸亮度调节

```

---

## ✅ 七、搜索引擎管理

```

内置搜索引擎：

* Google
* Bing
* 百度
* DuckDuckGo

功能要求：
✅ 默认搜索引擎设置
✅ 搜索引擎图标展示
✅ Tab 键轮播切换（受常规设置控制）
✅ 用户可新增自定义搜索引擎：

* 名称
* 搜索 URL（带 %s 占位符）
* 图标 URL 或本地图标

```

---

## ✅ 八、主题切换系统

```

提供 3 种主题模式：

1️⃣ 跟随系统（开关）

* 自动读取系统深浅色模式
* 系统切换时主题同步变更

2️⃣ 浅色主题

* 强制白色 UI
* 浅色背景
* 深色文字

3️⃣ 深色主题

* 深色 UI
* 深色背景
* 浅色文字

主题系统要求：
✅ 主题切换立即生效
✅ 主题状态永久保存
✅ 跟随系统优先级最高
✅ 通过 CSS 变量实现

```

---

## ✅ 九、技术强制约束（不可违反）

```

✅ 使用 Manifest V3
✅ 支持 Chrome + Edge
✅ 不允许使用 React / Vue / Svelte
✅ 只能使用原生 HTML / CSS / JavaScript
✅ 使用 chrome.storage.local 做数据持久化
✅ New Tab 使用 chrome_url_overrides
✅ 所有资源必须本地打包
✅ 适配 1920×1080 → 4K
✅ 动画仅使用 CSS Transition / requestAnimationFrame

```

---

## ✅ 十、目录结构生成提示词

```

请先输出完整标准工程目录结构，例如：

/tab-extension
├── manifest.json
├── newtab.html
├── styles/
│   ├── main.css
│   ├── theme.css
│   ├── settings.css
│   ├── wallpaper.css
├── scripts/
│   ├── main.js
│   ├── clock.js
│   ├── search.js
│   ├── settings.js
│   ├── theme.js
│   ├── wallpaper.js
│   ├── storage.js
├── assets/
│   ├── icons/
│   ├── engines/
├── background.js

并对每一个文件的职责进行专业级说明。

```

---

## ✅ 十一、强制输出流程（防止模型一次性崩溃）

```

阶段 1：产品功能设计文档
阶段 2：技术架构说明
阶段 3：目录结构 & 模块划分
阶段 4：manifest.json
阶段 5：NewTab 页面 HTML + CSS
阶段 6：时间与日期模块
阶段 7：搜索系统
阶段 8：设置面板 UI
阶段 9：常规设置逻辑
阶段 10：本地壁纸 + 遮罩 + 模糊系统
阶段 11：搜索引擎管理系统
阶段 12：主题切换系统
阶段 13：数据存储系统
阶段 14：最终联调与打包发布说明

```

---

## ✅ 十二、UI 风格统一约束

```

✅ 极简风格 / 类 Mac 风
✅ 半透明毛玻璃效果
✅ 左侧抽屉设置栏
✅ iOS 风格滑块
✅ 全局圆角 12px
✅ 线性 SVG 图标
✅ 面板宽度约 320px
✅ 默认系统字体
✅ 深浅主题配色必须统一

```

---

## ✅ ✅ 最终使用规则（最高约束）

```

* 必须严格按阶段输出
* 任何阶段不得跳过
* 不允许输出伪代码
* 不允许输出示例代码
* 所有代码必须真实可运行
* 所有功能必须完整闭环

```

```

---
```
